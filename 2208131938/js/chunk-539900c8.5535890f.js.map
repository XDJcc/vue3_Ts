{"version":3,"sources":["webpack:///./src/views/score/index.ts","webpack:///./src/views/score/score.vue","webpack:///./src/views/score/score.vue?db5a","webpack:///./src/views/score/score.vue?d313","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js"],"names":["this","element","document","getElementById","change","offsetLeft","offsetTop","left","Math","round","random","top","style","maxLevel","upScore","score","level","scoreEle","levelEle","innerHTML","levelUp","head","querySelector","bodies","getElementsByTagName","value","x","Error","moveBody","checkHeadBody","y","insertAdjacentHTML","len","i","length","setAttribute","bd","direction","isLive","keyDownHandler","event","key","snake","foot","scorePanel","init","addEventListener","run","checkEat","err","error","message","setTimeout","bind","addSore","addBody","_hoisted_1","class","_hoisted_2","_hoisted_3","setup","__props","gameProto","isLoadNowDom","openNewGame","_ctx","_cache","_component_el_button","_component_el_col","_component_el_row","type","justify","default","span","onClick","_","__exports__","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","exports","sfc","__vccOpts","val"],"mappings":"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","file":"2208131938/js/chunk-539900c8.5535890f.js","sourcesContent":["//食物构造器\nimport { ElMessage } from \"element-plus\";\n\nclass Foot {\n  element: HTMLElement;\n\n  constructor() {\n    this.element = document.getElementById(\"foot\");\n    this.change();\n  }\n\n  get x(): number {\n    return this.element.offsetLeft;\n  }\n\n  get y(): number {\n    return this.element.offsetTop;\n  }\n\n  change() {\n    const left: number = Math.round(Math.random() * 29) * 10;\n    const top: number = Math.round(Math.random() * 29) * 10;\n    this.element.style.left = left + \"px\";\n    this.element.style.top = top + \"px\";\n  }\n}\n\n/*计分板*/\nclass ScorePanel {\n  score = 0;\n  level = 1;\n  scoreEle: HTMLElement;\n  levelEle: HTMLElement;\n\n  maxLevel: number;\n  upScore: number;\n\n  constructor(maxLevel = 10, upScore = 10) {\n    this.scoreEle = document.getElementById(\"scoreEle\");\n    this.levelEle = document.getElementById(\"levelEle\");\n    this.maxLevel = maxLevel;\n    this.upScore = upScore;\n  }\n\n  //加分\n  addSore() {\n    this.scoreEle.innerHTML = \"Score:\" + ++this.score + \"\";\n    if (this.score % this.upScore === 0) this.levelUp();\n  }\n\n  //升级\n  levelUp() {\n    if (this.level > this.maxLevel) return;\n    this.levelEle.innerHTML = \"Level:\" + ++this.level + \"\";\n  }\n}\n\n/*\n *  蛇\n * */\nclass Snake {\n  head: HTMLElement;\n  bodies: HTMLCollection;\n  element: HTMLElement;\n\n  constructor() {\n    this.element = document.getElementById(\"snake\");\n    this.head = this.element.querySelector(\"div\");\n    this.bodies = this.element.getElementsByTagName(\"div\");\n  }\n\n  get x() {\n    return this.head.offsetLeft;\n  }\n\n  set x(value: number) {\n    if (this.x == value) return;\n    //限制范围\n    if (value < 0 || value > 300) {\n      throw new Error(\"撞墙！\");\n    }\n    if (\n      this.bodies[1] &&\n      (this.bodies[1] as HTMLElement).offsetLeft === value\n    ) {\n      if (value > this.x) this.x -= value - this.x;\n      else this.x += this.x - value;\n    }\n    //移动身体\n    this.moveBody();\n    this.head.style.left = value + \"px\";\n    this.checkHeadBody();\n  }\n\n  get y() {\n    return this.head.offsetTop;\n  }\n\n  set y(value: number) {\n    if (this.y == value) return;\n    if (value < 0 || value > 300) {\n      throw new Error(\"撞墙！\");\n    }\n    if (this.bodies[1] && (this.bodies[1] as HTMLElement).offsetTop === value) {\n      if (value > this.y) this.y -= value - this.y;\n      else this.y += this.y - value;\n    }\n    this.moveBody();\n    this.head.style.top = value + \"px\";\n    this.checkHeadBody();\n  }\n\n  //吃到食物\n  addBody() {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore.\n    this.element.insertAdjacentHTML(\"beforeend\", \"<div></div>\");\n    const len = this.element.getElementsByTagName(\"div\");\n    for (let i = 0; i < len.length - 1; i++) {\n      len[i].setAttribute(\"class\", \"xx\");\n    }\n  }\n\n  //移动身体  把前面一个位置 赋值给 后面的一个元素\n  moveBody() {\n    for (let i = this.bodies.length - 1; i > 0; i--) {\n      const x = (this.bodies[i - 1] as HTMLElement).offsetLeft;\n      const y = (this.bodies[i - 1] as HTMLElement).offsetTop;\n      (this.bodies[i] as HTMLElement).style.left = x + \"px\";\n      (this.bodies[i] as HTMLElement).style.top = y + \"px\";\n    }\n  }\n\n  //是否撞到身体\n  checkHeadBody() {\n    for (let i = 1; i < this.bodies.length; i++) {\n      const bd = this.bodies[i] as HTMLElement;\n      if (this.x === bd.offsetLeft && this.y === bd.offsetTop) {\n        throw new Error(\"撞到自己\");\n      }\n    }\n  }\n}\n\n/*游戏控制器*/\nexport default class GameControl {\n  snake: Snake;\n  foot: Foot;\n  scorePanel: ScorePanel;\n  direction = \"\";\n  isLive = true;\n\n  constructor() {\n    this.snake = new Snake();\n    this.foot = new Foot();\n    this.scorePanel = new ScorePanel(100, 1);\n    this.init();\n  }\n\n  //初始化游戏\n  private init() {\n    document.addEventListener(\"keydown\", this.keyDownHandler);\n    this.run();\n  }\n\n  keyDownHandler = (event: KeyboardEvent): void => {\n    this.direction = event.key;\n  };\n\n  //开始移动 的方向\n  run(): void {\n    let x = this.snake.x;\n    let y = this.snake.y;\n\n    switch (this.direction) {\n      case \"ArrowUp\":\n      case \"Up\":\n        y -= 10;\n        break;\n      case \"ArrowDown\":\n      case \"Down\":\n        y += 10;\n        break;\n      case \"ArrowLeft\":\n      case \"Left\":\n        x -= 10;\n        break;\n      case \"ArrowRight\":\n      case \"Right\":\n        x += 10;\n        break;\n    }\n\n    //吃到食物  分数增加  蛇增加\n    this.checkEat(x, y);\n\n    try {\n      this.snake.x = x;\n      this.snake.y = y;\n    } catch (err) {\n      ElMessage.error(err.message + \"GOME OVER\");\n      this.isLive = false;\n    }\n    this.isLive &&\n    setTimeout(this.run.bind(this), 300 - (this.scorePanel.level - 1) * 30);\n  }\n\n  //  是否吃到食物\n  checkEat(x: number, y: number): void {\n    if (x === this.foot.x && y === this.foot.y) {\n      this.foot.change();\n      this.scorePanel.addSore();\n      this.snake.addBody();\n    }\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-476ae6ce\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"container\" }\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"重新开始\")\nconst _hoisted_3 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"main\\\" data-v-476ae6ce><div class=\\\"stage\\\" data-v-476ae6ce><div id=\\\"snake\\\" class=\\\"snake\\\" data-v-476ae6ce><p id=\\\"foot\\\" class=\\\"foot\\\" data-v-476ae6ce></p><div class=\\\"xx\\\" data-v-476ae6ce></div><div data-v-476ae6ce></div></div></div><div id=\\\"score-panel\\\" class=\\\"score-panel\\\" data-v-476ae6ce><div id=\\\"scoreEle\\\" data-v-476ae6ce>Score:0</div><div id=\\\"levelEle\\\" data-v-476ae6ce>Level:1</div></div></div>\", 1)\n\nimport GameControl from \"@/views/score/index\";\nimport { inject, nextTick, onMounted } from \"vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  setup(__props) {\n\nonMounted(() => {\n  init();\n});\nlet gameProto: unknown = null;\n\nconst init = async (): Promise<void> => {\n  await nextTick();\n  gameProto = new GameControl();\n};\n\nconst isLoadNowDom: () => Promise<void> = inject(\"isLoadNowDom\");\n\n//开始新游戏\nconst openNewGame = (): void => {\n  gameProto.isLive = false; //停止移动\n  isLoadNowDom();\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_col = _resolveComponent(\"el-col\")!\n  const _component_el_row = _resolveComponent(\"el-row\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_el_row, {\n      type: \"flex\",\n      justify: \"center\"\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_component_el_col, { span: 1 }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              onClick: openNewGame\n            }, {\n              default: _withCtx(() => [\n                _hoisted_2\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _hoisted_3\n  ]))\n}\n}\n\n})","import script from \"./score.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./score.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./score.vue?vue&type=style&index=0&id=476ae6ce&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/zhangjiang/Desktop/WebstormProject/vue3_Ts/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-476ae6ce\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./score.vue?vue&type=style&index=0&id=476ae6ce&scoped=true&lang=scss\"","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n"],"sourceRoot":""}