{"version":3,"sources":["webpack:///./src/views/score/index.ts","webpack:///./src/views/score/score.vue","webpack:///./src/views/score/score.vue?db5a","webpack:///./src/views/score/score.vue?0708","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js"],"names":["this","element","document","getElementById","change","offsetLeft","offsetTop","left","Math","round","random","top","style","maxLevel","upScore","score","level","scoreEle","levelEle","innerHTML","levelUp","head","querySelector","bodies","getElementsByTagName","value","x","Error","moveBody","checkHeadBody","y","insertAdjacentHTML","len","i","length","setAttribute","bd","direction","isLive","keyDownHandler","event","key","snake","foot","scorePanel","init","addEventListener","run","checkEat","err","error","message","setTimeout","bind","addSore","addBody","_hoisted_1","class","_hoisted_2","_hoisted_3","setup","__props","gameProto","isLoadNowDom","openNewGame","_ctx","_cache","_component_el_button","_component_el_col","_component_el_row","type","justify","default","span","onClick","_","__exports__","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","exports","sfc","__vccOpts","val"],"mappings":"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","file":"2112042127/js/chunk-243eff66.76612520.js","sourcesContent":["//食物构造器\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nclass Foot {\r\n  element: HTMLElement;\r\n\r\n  constructor() {\r\n    this.element = document.getElementById(\"foot\");\r\n    this.change();\r\n  }\r\n\r\n  get x(): number {\r\n    return this.element.offsetLeft;\r\n  }\r\n\r\n  get y(): number {\r\n    return this.element.offsetTop;\r\n  }\r\n\r\n  change() {\r\n    const left: number = Math.round(Math.random() * 29) * 10;\r\n    const top: number = Math.round(Math.random() * 29) * 10;\r\n    this.element.style.left = left + \"px\";\r\n    this.element.style.top = top + \"px\";\r\n  }\r\n}\r\n\r\n/*计分板*/\r\nclass ScorePanel {\r\n  score = 0;\r\n  level = 1;\r\n  scoreEle: HTMLElement;\r\n  levelEle: HTMLElement;\r\n\r\n  maxLevel: number;\r\n  upScore: number;\r\n\r\n  constructor(maxLevel = 10, upScore = 10) {\r\n    this.scoreEle = document.getElementById(\"scoreEle\");\r\n    this.levelEle = document.getElementById(\"levelEle\");\r\n    this.maxLevel = maxLevel;\r\n    this.upScore = upScore;\r\n  }\r\n\r\n  //加分\r\n  addSore() {\r\n    this.scoreEle.innerHTML = \"Score:\" + ++this.score + \"\";\r\n    if (this.score % this.upScore === 0) this.levelUp();\r\n  }\r\n\r\n  //升级\r\n  levelUp() {\r\n    if (this.level > this.maxLevel) return;\r\n    this.levelEle.innerHTML = \"Level:\" + ++this.level + \"\";\r\n  }\r\n}\r\n\r\n/*\r\n *  蛇\r\n * */\r\nclass Snake {\r\n  head: HTMLElement;\r\n  bodies: HTMLCollection;\r\n  element: HTMLElement;\r\n\r\n  constructor() {\r\n    this.element = document.getElementById(\"snake\");\r\n    this.head = this.element.querySelector(\"div\");\r\n    this.bodies = this.element.getElementsByTagName(\"div\");\r\n  }\r\n\r\n  get x() {\r\n    return this.head.offsetLeft;\r\n  }\r\n\r\n  set x(value: number) {\r\n    if (this.x == value) return;\r\n    //限制范围\r\n    if (value < 0 || value > 300) {\r\n      throw new Error(\"撞墙！\");\r\n    }\r\n    if (\r\n      this.bodies[1] &&\r\n      (this.bodies[1] as HTMLElement).offsetLeft === value\r\n    ) {\r\n      if (value > this.x) this.x -= value - this.x;\r\n      else this.x += this.x - value;\r\n    }\r\n    //移动身体\r\n    this.moveBody();\r\n    this.head.style.left = value + \"px\";\r\n    this.checkHeadBody();\r\n  }\r\n\r\n  get y() {\r\n    return this.head.offsetTop;\r\n  }\r\n\r\n  set y(value: number) {\r\n    if (this.y == value) return;\r\n    if (value < 0 || value > 300) {\r\n      throw new Error(\"撞墙！\");\r\n    }\r\n    if (this.bodies[1] && (this.bodies[1] as HTMLElement).offsetTop === value) {\r\n      if (value > this.y) this.y -= value - this.y;\r\n      else this.y += this.y - value;\r\n    }\r\n    this.moveBody();\r\n    this.head.style.top = value + \"px\";\r\n    this.checkHeadBody();\r\n  }\r\n\r\n  //吃到食物\r\n  addBody() {\r\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n    // @ts-ignore.\r\n    this.element.insertAdjacentHTML(\"beforeend\", \"<div></div>\");\r\n    const len = this.element.getElementsByTagName(\"div\");\r\n    for (let i = 0; i < len.length - 1; i++) {\r\n      len[i].setAttribute(\"class\", \"xx\");\r\n    }\r\n  }\r\n\r\n  //移动身体  把前面一个位置 赋值给 后面的一个元素\r\n  moveBody() {\r\n    for (let i = this.bodies.length - 1; i > 0; i--) {\r\n      const x = (this.bodies[i - 1] as HTMLElement).offsetLeft;\r\n      const y = (this.bodies[i - 1] as HTMLElement).offsetTop;\r\n      (this.bodies[i] as HTMLElement).style.left = x + \"px\";\r\n      (this.bodies[i] as HTMLElement).style.top = y + \"px\";\r\n    }\r\n  }\r\n\r\n  //是否撞到身体\r\n  checkHeadBody() {\r\n    for (let i = 1; i < this.bodies.length; i++) {\r\n      const bd = this.bodies[i] as HTMLElement;\r\n      if (this.x === bd.offsetLeft && this.y === bd.offsetTop) {\r\n        throw new Error(\"撞到自己\");\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/*游戏控制器*/\r\nexport default class GameControl {\r\n  snake: Snake;\r\n  foot: Foot;\r\n  scorePanel: ScorePanel;\r\n  direction = \"\";\r\n  isLive = true;\r\n\r\n  constructor() {\r\n    this.snake = new Snake();\r\n    this.foot = new Foot();\r\n    this.scorePanel = new ScorePanel(100, 1);\r\n    this.init();\r\n  }\r\n\r\n  //初始化游戏\r\n  private init() {\r\n    document.addEventListener(\"keydown\", this.keyDownHandler);\r\n    this.run();\r\n  }\r\n\r\n  keyDownHandler = (event: KeyboardEvent): void => {\r\n    this.direction = event.key;\r\n  };\r\n\r\n  //开始移动 的方向\r\n  run(): void {\r\n    let x = this.snake.x;\r\n    let y = this.snake.y;\r\n\r\n    switch (this.direction) {\r\n      case \"ArrowUp\":\r\n      case \"Up\":\r\n        y -= 10;\r\n        break;\r\n      case \"ArrowDown\":\r\n      case \"Down\":\r\n        y += 10;\r\n        break;\r\n      case \"ArrowLeft\":\r\n      case \"Left\":\r\n        x -= 10;\r\n        break;\r\n      case \"ArrowRight\":\r\n      case \"Right\":\r\n        x += 10;\r\n        break;\r\n    }\r\n\r\n    //吃到食物  分数增加  蛇增加\r\n    this.checkEat(x, y);\r\n\r\n    try {\r\n      this.snake.x = x;\r\n      this.snake.y = y;\r\n    } catch (err) {\r\n      ElMessage.error(err.message + \"GOME OVER\");\r\n      this.isLive = false;\r\n    }\r\n    this.isLive &&\r\n    setTimeout(this.run.bind(this), 300 - (this.scorePanel.level - 1) * 30);\r\n  }\r\n\r\n  //  是否吃到食物\r\n  checkEat(x: number, y: number): void {\r\n    if (x === this.foot.x && y === this.foot.y) {\r\n      this.foot.change();\r\n      this.scorePanel.addSore();\r\n      this.snake.addBody();\r\n    }\r\n  }\r\n}\r\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-2edcb2ea\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"container\" }\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"重新开始\")\nconst _hoisted_3 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"main\\\" data-v-2edcb2ea><div class=\\\"stage\\\" data-v-2edcb2ea><div id=\\\"snake\\\" class=\\\"snake\\\" data-v-2edcb2ea><p id=\\\"foot\\\" class=\\\"foot\\\" data-v-2edcb2ea></p><div class=\\\"xx\\\" data-v-2edcb2ea></div><div data-v-2edcb2ea></div></div></div><div id=\\\"score-panel\\\" class=\\\"score-panel\\\" data-v-2edcb2ea><div id=\\\"scoreEle\\\" data-v-2edcb2ea>Score:0</div><div id=\\\"levelEle\\\" data-v-2edcb2ea>Level:1</div></div></div>\", 1)\n\nimport GameControl from \"@/views/score/index\";\r\nimport { inject, nextTick, onMounted } from \"vue\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  setup(__props) {\n\r\nonMounted(() => {\r\n  init();\r\n});\r\nlet gameProto: unknown = null;\r\n\r\nconst init = async (): Promise<void> => {\r\n  await nextTick();\r\n  gameProto = new GameControl();\r\n};\r\n\r\nconst isLoadNowDom: () => Promise<void> = inject(\"isLoadNowDom\");\r\n\r\n//开始新游戏\r\nconst openNewGame = (): void => {\r\n  gameProto.isLive = false; //停止移动\r\n  isLoadNowDom();\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_col = _resolveComponent(\"el-col\")!\n  const _component_el_row = _resolveComponent(\"el-row\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_el_row, {\n      type: \"flex\",\n      justify: \"center\"\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_component_el_col, { span: 1 }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              onClick: openNewGame\n            }, {\n              default: _withCtx(() => [\n                _hoisted_2\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _hoisted_3\n  ]))\n}\n}\n\n})","import script from \"./score.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./score.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./score.vue?vue&type=style&index=0&id=2edcb2ea&scoped=true&lang=scss\"\n\nimport exportComponent from \"D:\\\\WebStorm_Demo\\\\vue3_Ts\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2edcb2ea\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./score.vue?vue&type=style&index=0&id=2edcb2ea&scoped=true&lang=scss\"","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n"],"sourceRoot":""}